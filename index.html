<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Rose Focus Example</title>
	</head>
	<script type="text/javascript" src="./js/jquery-1.9.1.min.js"></script>
	<script type="text/javascript" src="./js/jquery-ui-1.10.3.custom.min.js"></script>
	<link rel="stylesheet" href="./css/rosefocus.css">
<body>
	
	<div class="rf-container">
		<div class="rf-container-body">
			<a href="#" class="rf-slide-prev"></a>
			<div class="rf-slide-pane">
				<div class="rf-slide-section">
					<div class="rf-section-item" id="rf-section-1">
						<div class="rf-section-item-inner">
							<h1>
								<a href="#"><img src="./images/text1.png" alt=""></a>
							</h1>							
						</div>
					</div>
					<div class="rf-section-item" id="rf-section-2">
						<div class="rf-section-item-inner">
							<h1>
								<a href="#"><img src="./images/text2.png" alt=""></a>
							</h1>
						</div>
					</div>
					<div class="rf-section-item" id="rf-section-3">
						<div class="rf-section-item-inner">
							<h1>
								<a href="#"><img src="./images/text3.png" alt=""></a>
							</h1>
						</div>
					</div>
				</div>
			</div>
			<a href="#" class="rf-slide-next"></a>
			<div class="rf-slide-nav">
				<a href="#" id="s1" class="on trigger">
					<div class="rf-slide-nav-thumb thumb-1">
						
					</div>
				</a>
				<a href="#" id="s2" class="trigger">
					<div class="rf-slide-nav-thumb thumb-2">
						
					</div>					
				</a>
				<a href="#" id="s3" class="trigger">
					<div class="rf-slide-nav-thumb thumb-3">
						
					</div>					
				</a>
			</div>
		</div>
	</div>
	<div class="rf-pcon">
		<div class="rf-content">
			<div class="rf-content-body">
				<div class="rf-content-main">
					<div class="rf-news-feed">
						<div class="rf-news-feed-inner">
							<p>Gridsum 新闻与时事通讯: <a href="javascript:void(0);">智能数据助力政府精细管理和科学决策</a>
							</p>
						</div>
					</div>
					<div class="rf-container rf-promotion-container" id="rf-promotion-module">
						<div class="rf-container-body rf-promotion-body">
							<a href="javascript:void(0);" class="rf-ribbon-prev hide"></a>
							<div class="rf-ribbon-pane">
								<div class="rf-ribbon-section">
									<div class="rf-ribbon-column">
										<div class="rf-column">
											<a href="javascript:void(0);">
												<img src="./images/gs-ribbon-1.jpg" height="98" width="318" alt="">
											</a>
										</div>
									</div>
									<div class="rf-ribbon-column">
										<div class="rf-column">
											<a href="javascript:void(0);">
												<img src="./images/gs-ribbon-2.jpg" height="98" width="318" alt="">
											</a>
										</div>
									</div>
									<div class="rf-ribbon-column">
										<div class="rf-column">
											<a href="javascript:void(0);">
												<img src="./images/gs-ribbon-3.jpg" height="98" width="318" alt="">
											</a>
										</div>
									</div>
									<div class="rf-ribbon-column">
										<div class="rf-column">
											<a href="javascript:void(0);">
												<img src="./images/gs-ribbon-3.jpg" height="98" width="318" alt="">
											</a>
										</div>
									</div>
								</div>
							</div>
							<a href="javascript:void(0);" class="rf-ribbon-next"></a>							
						</div>
					</div>
				</div>
				<div class="rf-content-sidebar"></div>
			</div>
		</div>
	</div>

	<script type="text/javascript">
	$(document).ready(function(){
		$('.rf-section-item').css('width', $(window).width() );
		$(window).resize(function() {
			//update stuff
			//alert('test');
			$('.rf-section-item').css('width', $(window).width() );
		});

		var current = 1;
		var node = 1;

		function autoplay(){
			node = node + 1;
			if( node > 3 ){
				node = 1;
			}
			$('#s'+node).trigger('click');			
		}

		var play = setInterval(autoplay, 5000);


		$('.rf-container').hover(function(){
			return function(){
				if(play){
					clearInterval(play);
				}
			}();
		}, function(){
			play = setInterval(autoplay, 5000);
		});

		$('.rf-ribbon-next').click(function(e){
			$('.rf-ribbon-section').animate(
				{left:-330},{
					duration: 1000
				}
			);
		});

		$('.rf-ribbon-prev').click(function(e){
			$('.rf-ribbon-section').animate(
				{left:0},{
					duration: 1000
				}
			);
		});

		$('.trigger').click(function(e){			
			var i = $(this);
			var w = $(window).width();
			var c = i.index();
			var left = -1 * w *  ( i.index() );

			$('.trigger').removeClass('on');
			$(this).addClass('on');

			//console.log( '#rf-section-' + current + '>div>h1' );
			//console.log( $('#rf-section-' + current + '>div>h1') );
			//console.log( 'left:' + left );
			var that;
			$('#rf-section-' + current + '>div>h1').animate(
				{
					left:-2500
				},{
					duration: 2000,
					easing: 'easeOutQuint',
					step : function(now, fx){

					},
					complete: function(){
						//$(this).css('left','0');
						that = this;
					}
				}
			);
			$('.rf-slide-section').animate(
				{
					left: left
				}, {
					duration: 2000,
					easing: 'easeInOutExpo',
					complete: function(){
						$(that).css('left','0');
					}
				}
			);
			//console.log('Current:' + current);
			current = c + 1;
			node = current + 1;
			//console.log('Current Changed:' + current);
		});
	});
	</script>
</body>
</html>